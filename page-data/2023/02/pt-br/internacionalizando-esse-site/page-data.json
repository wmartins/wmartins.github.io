{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/02/pt-br/internacionalizando-esse-site/","result":{"data":{"markdownRemark":{"html":"<p>No momento que escrevo essa postagem, meu site pessoal usa Gatsby como gerador\nde site estático. Há tempos que gostaria de escrever um pouco mais em português\npor aqui, porém, nunca tive tempo e paciência para mexer nesse site de forma que\neu possa, com uma certa facilidade, escrever tanto em inglês quanto em\nportuguês.</p>\n<p>Tirei um tempinho para tentar fazer isso de uma maneira simples. O que\nencontrei, primeiramente, foram várias dependências desatualizadas e uma versão\nde Gatsby que, aparentemente, só funciona em versões mais antigas de Node.js.\nMinha primeira tarefa foi atualizar essas dependências, o que funcionou super\nbem, porém, já vi que tenho vários <em>Warnings</em> para olhar. O que me impressionou\nmuito foi o fato de tudo funcionar, mesmo passando por 3 atualizações <em>major</em>\n(atualizando da versão 2 para 5)!</p>\n<p>O próximo passo até que foi simples. Criei uma nova página chamada <code class=\"language-text\">pt-br</code> para\nser a versão em português desse site. Essa página faz duas coisas bastante\nsimples:</p>\n<ul>\n<li>Consulta todos os posts escritos em português (<code class=\"language-text\">content/post/pt-br</code>)</li>\n<li>Informa ao componente <code class=\"language-text\">Layout</code> que o mesmo deve renderizar em português\n<ul>\n<li>Lá, existe uma abstração bem simples para o menu em duas línguas</li>\n</ul>\n</li>\n</ul>\n<p>Isso por si só já fez várias coisas funcionar. Porém, os posts já escritos\npassaram a ter o <em>slug</em> com <code class=\"language-text\">en-us</code> em função de eu ter criado uma pasta para\nposts de cada língua. A solução também acabou sendo bem simples: na função\n<a href=\"https://www.gatsbyjs.com/plugins/gatsby-source-filesystem/?=files#createfilepath\"><code class=\"language-text\">createFilePath</code></a>,\nposso especificar que, caso a lingua seja <code class=\"language-text\">en-us</code>, o <code class=\"language-text\">basePath</code> passa a ser\n<code class=\"language-text\">post/en-us</code>.</p>\n<p>Um outro pequeno problema é o fato de que, quando fazia o acesso do post escrito\nem português, o menu estava sendo renderizado em inglês. Resolver isso também é\nrelativamente simples. Adicionei um novo campo (<code class=\"language-text\">createNodeField</code>) para cada\npost contendo a língua escrita. Esse valor é extraído com uma expressão regular\nem cima do caminho do post. Com isso, quando fazemos a renderização do post,\nagora sabemos a língua e podemos passar essa informação para o componente de\nLayout.</p>\n<p><em>Voilà</em>, agora temos agora posts escritos em português.</p>\n<p>Talvez essa não seja a melhor forma de fazer isso e entendo que existem plugins\nque resolvem esse tipo de problema. Porém, os plugins normalmente fazem muitas\nmágicas. Prefiro iniciar com algo que tenho controle e contexto e,\nposteriormente, caso faça sentido, posso migrar para algum plugin.</p>\n<p>Uma nota mental para mim mesmo para o futuro desse site é:</p>\n<ul>\n<li>Resolver os <em>warnings</em></li>\n<li>Considerar migrar de Gatsby para Next</li>\n<li>Reorganizar os arquivos e pastas</li>\n<li>Considerar migrar a codebase para TypeScript</li>\n<li>Verificar como formatar as datas para as postagens também terem as datas internacionalizadas</li>\n</ul>","frontmatter":{"title":"Internacionalizando esse site","tags":null}}},"pageContext":{"slug":"/2023/02/pt-br/internacionalizando-esse-site/","lang":"pt-br"}},"staticQueryHashes":["2744905544","3000541721","3159585216"],"slicesMap":{}}